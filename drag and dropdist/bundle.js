(()=>{"use strict";var e={583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0,t.Component=class{constructor(e,t,r,n){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,n&&(this.element.id=n),this.attach(r)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}},377:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectInput=void 0;const s=r(583),i=r(954),o=r(905),a=r(169);class l extends s.Component{constructor(){super("project-input","app",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,t=this.titleInputElement.value,r=this.titleInputElement.value;this.clearInputs();const n={value:e,required:!0,minLength:5},s={value:e,required:!0,minLength:5},o={value:e,required:!0,min:5,max:5};return i.validate(n)&&i.validate(s)&&i.validate(o)?[e,t,+r]:void alert("invalid input")}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const t=this.gatherUserInput();if(Array.isArray(t)){const[e,r,n]=t;a.projectState.addProject(e,r,n),this.clearInputs()}}configure(){this.element.addEventListener("submit",this.submitHandler.bind(this))}}n([o.autobind],l.prototype,"submitHandler",null),t.ProjectInput=l},633:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectItem=void 0;const s=r(583),i=r(905);class o extends s.Component{constructor(e,t){super("single-project",e,!1,t.id),this.project=t,this.configure(),this.renderContent()}get persons(){return 1===this.project.people?"1 person":`${this.project.people} persons`}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragStartHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.persons+"assigned.",this.element.querySelector("p").textContent=this.project.description}}n([i.autobind],o.prototype,"dragStartHandler",null),n([i.autobind],o.prototype,"dragEndHandler",null),t.ProjectItem=o},134:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectList=void 0;const s=r(294),i=r(583),o=r(905),a=r(169),l=r(633);class c extends i.Component{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.renderContent(),this.configure()}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}dropHandler(e){const t=e.dataTransfer.getData("text/plain");a.projectState.moveProject(t,"active"===this.type?s.ProjectStatus.Active:s.ProjectStatus.Finished)}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="",this.assignedProjects.forEach((e=>{new l.ProjectItem(this.element.querySelector("ul").id,e)}))}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),a.projectState.addListener((e=>{const t=e.filter((e=>"active"===this.type?e.status===s.ProjectStatus.Active:e.status===s.ProjectStatus.Finished));this.assignedProjects=t,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+"PROJECTS"}}n([o.autobind],c.prototype,"dragOverHandler",null),n([o.autobind],c.prototype,"dragLeaveHandler",null),n([o.autobind],c.prototype,"dropHandler",null),t.ProjectList=c},905:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autobind=void 0,t.autobind=function(e,t,r){const n=r.value;return{configurable:!0,get(){return n.bind(this)}}}},294:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectStatus=t.Project=void 0,t.Project=class{constructor(e,t,r,n,s){this.id=e,this.title=t,this.description=r,this.people=n,this.status=s}},(r=t.ProjectStatus||(t.ProjectStatus={}))[r.Active=0]="Active",r[r.Finished=1]="Finished"},169:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.projectState=void 0;const n=r(294);class s extends class{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new s),this.instance}addProject(e,t,r){const s=new n.Project(Math.random().toString(),e,t,r,n.ProjectStatus.Active);this.projects.push(s),this.listeners.forEach((e=>{e([...this.projects])}))}moveProject(e,t){const r=this.projects.find((t=>t.id===e));r&&r.status!==t&&(r.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}t.projectState=s.getInstance()},954:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0,t.validate=function(e){let t=!0;return e.required&&(t=t&&0!==e.value.toString().trim().length),null!=e.minLength&&"string"==typeof e.value&&(t=t&&e.value.length>e.minLength),null!=e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.length<e.maxLength),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value>e.min),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value>e.max),t}}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(()=>{const e=r(377),t=r(134);new e.ProjectInput,new t.ProjectList("active"),new t.ProjectList("finished")})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91bmRlcnN0YW5kaW5nLXR5cGVzY3JpcHQvLi9zcmMvY29tcG9uZW50cy9iYXNlLWNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly91bmRlcnN0YW5kaW5nLXR5cGVzY3JpcHQvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWlucHV0LnRzIiwid2VicGFjazovL3VuZGVyc3RhbmRpbmctdHlwZXNjcmlwdC8uL3NyYy9jb21wb25lbnRzL3Byb2plY3QtaXRlbS50cyIsIndlYnBhY2s6Ly91bmRlcnN0YW5kaW5nLXR5cGVzY3JpcHQvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWxpc3QudHMiLCJ3ZWJwYWNrOi8vdW5kZXJzdGFuZGluZy10eXBlc2NyaXB0Ly4vc3JjL2RlY29yYXRvcnMvYXV0b2JpbmQudHMiLCJ3ZWJwYWNrOi8vdW5kZXJzdGFuZGluZy10eXBlc2NyaXB0Ly4vc3JjL21vZGVscy9wcm9qZWN0LnRzIiwid2VicGFjazovL3VuZGVyc3RhbmRpbmctdHlwZXNjcmlwdC8uL3NyYy9zdGF0ZS9wcm9qZWN0LXN0YXRlLnRzIiwid2VicGFjazovL3VuZGVyc3RhbmRpbmctdHlwZXNjcmlwdC8uL3NyYy91dGlsL3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8vdW5kZXJzdGFuZGluZy10eXBlc2NyaXB0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3VuZGVyc3RhbmRpbmctdHlwZXNjcmlwdC8uL3NyYy9hcHAudHMiXSwibmFtZXMiOlsidGVtcGxhdGVJZCIsImhvc3RFbGVtZW50SWQiLCJpbnNlcnRBdFN0YXJ0IiwibmV3RWxlbWVudElkIiwidGhpcyIsInRlbXBsYXRlRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJob3N0RWxlbWVudCIsImltcG9ydGVkTm9kZSIsImltcG9ydE5vZGUiLCJjb250ZW50IiwiZWxlbWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiaWQiLCJhdHRhY2giLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJQcm9qZWN0SW5wdXQiLCJDb21wb25lbnQiLCJzdXBlciIsInRpdGxlSW5wdXRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImRlc2NyaXB0aW9uSW5wdXRFbGVtZW50IiwicGVvcGxlSW5wdXRFbGVtZW50IiwiY29uZmlndXJlIiwiZW50ZXJlZFRpdGxlIiwidmFsdWUiLCJlbnRlcmVkRGVzY3JpcHRpb24iLCJlbnRlcmVkUGVvcGxlIiwiY2xlYXJJbnB1dHMiLCJ0aXRsZUlucHV0IiwicmVxdWlyZWQiLCJtaW5MZW5ndGgiLCJkZXNjcmlwdGlvbklucHV0IiwicGVvcGxlSW5wdXQiLCJtaW4iLCJtYXgiLCJ2YWxpZGF0ZSIsImFsZXJ0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJJbnB1dCIsImdhdGhlclVzZXJJbnB1dCIsIkFycmF5IiwiaXNBcnJheSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwZW9wbGUiLCJwcm9qZWN0U3RhdGUiLCJhZGRQcm9qZWN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInN1Ym1pdEhhbmRsZXIiLCJiaW5kIiwiYXV0b2JpbmQiLCJQcm9qZWN0SXRlbSIsImhvc3RJZCIsInByb2plY3QiLCJyZW5kZXJDb250ZW50IiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImVmZmVjdEFsbG93ZWQiLCJfIiwiZHJhZ1N0YXJ0SGFuZGxlciIsInRleHRDb250ZW50IiwicGVyc29ucyIsIlByb2plY3RMaXN0IiwidHlwZSIsImFzc2lnbmVkUHJvamVjdHMiLCJ0eXBlcyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInByb2plY3RJZCIsImdldERhdGEiLCJtb3ZlUHJvamVjdCIsIlByb2plY3RTdGF0dXMiLCJBY3RpdmUiLCJGaW5pc2hlZCIsImlubmVySFRNTCIsImZvckVhY2giLCJpdGVtIiwiZHJhZ092ZXJIYW5kbGVyIiwiZHJhZ0xlYXZlSGFuZGxlciIsImRyb3BIYW5kbGVyIiwiYWRkTGlzdGVuZXIiLCJwcm9qZWN0cyIsInJlbGV2YW50UHJvamVjdHMiLCJmaWx0ZXIiLCJzdGF0dXMiLCJyZW5kZXJQcm9qZWN0cyIsImxpc3RJZCIsInRvVXBwZXJDYXNlIiwiXzIiLCJkZXNjcmlwdG9yIiwib3JnaW5hbE1ldGhvZCIsImNvbmZpZ3VyYWJsZSIsIlByb2plY3RTdGF0ZSIsImxpc3RlbmVycyIsImxpc3RlbmVyRnVuY3Rpb24iLCJwdXNoIiwiaW5zdGFuY2UiLCJudW1iZXJPZlBlb3BsZSIsIm5ld1Byb2plY3QiLCJQcm9qZWN0IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwiZm4iLCJuZXdTdGF0dXMiLCJmaW5kIiwicHJqIiwidXBkYXRlTGlzdGVuZXJzIiwibGlzdGVuZXJGbiIsInNsaWNlIiwiZ2V0SW5zdGFuY2UiLCJpbnB1dCIsImlzVmFsaWQiLCJ0cmltIiwibGVuZ3RoIiwibWF4TGVuZ3RoIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIl0sIm1hcHBpbmdzIjoiMEdBQUEsa0JBS0csWUFDR0EsRUFDQUMsRUFDQUMsRUFDQUMsR0FFQUMsS0FBS0MsZ0JBQXVDQyxTQUFTQyxlQUFlUCxHQUNwRUksS0FBS0ksWUFBaUJGLFNBQVNDLGVBQWVOLEdBQzlDLE1BQU1RLEVBQWVILFNBQVNJLFdBQVdOLEtBQUtDLGdCQUFnQk0sU0FBUyxHQUN2RVAsS0FBS1EsUUFBYUgsRUFBYUksa0JBQzVCVixJQUNBQyxLQUFLUSxRQUFRRSxHQUFLWCxHQUVyQkMsS0FBS1csT0FBT2IsR0FHUCxPQUFPQSxHQUNaRSxLQUFLSSxZQUFZUSxzQkFBc0JkLEVBQWdCLGFBQWUsWUFBYUUsS0FBS1EsWSw0YkN0QjlGLGVBQ0EsU0FDQSxTQUNBLFNBR0EsTUFBYUssVUFBcUIsRUFBQUMsVUFLL0IsY0FDR0MsTUFBTSxnQkFBaUIsT0FBTyxFQUFNLGNBQ3BDZixLQUFL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Q3hDMEYsRUFBVUEsR0FBV0QsRUFBTXpGLE1BQU00RixPQUFTSCxFQUFNbkYsV0FFN0IsTUFBbkJtRixFQUFNSSxXQUE0QyxpQkFBaEJKLEVBQU16RixRQUN4QzBGLEVBQVVBLEdBQVdELEVBQU16RixNQUFNNEYsT0FBU0gsRUFBTUksV0FFbkMsTUFBYkosRUFBTWhGLEtBQXNDLGlCQUFoQmdGLEVBQU16RixRQUNsQzBGLEVBQVVBLEdBQVdELEVBQU16RixNQUFReUYsRUFBTWhGLEtBRTVCLE1BQWJnRixFQUFNL0UsS0FBc0MsaUJBQWhCK0UsRUFBTXpGLFFBQ2xDMEYsRUFBVUEsR0FBV0QsRUFBTXpGLE1BQVF5RixFQUFNL0UsS0FFckNnRixLQ2hCTkksRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsSUFPVixPQUhBRSxFQUFvQkwsR0FBVU0sS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELFEsTUNyQmYsZUFDQSxTQUdBLElBQUksRUFBQTVHLGFBQ0osSUFBSSxFQUFBZ0QsWUFBWSxVQUNoQixJQUFJLEVBQUFBLFlBQVksYSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tcG9uZW50PFQgZXh0ZW5kcyBIVE1MRWxlbWVudCwgVSBleHRlbmRzIEhUTUxFbGVtZW50PiB7XHJcbiAgIHRlbXBsYXRlRWxlbWVudDogSFRNTFRlbXBsYXRlRWxlbWVudFxyXG4gICBob3N0RWxlbWVudDogVFxyXG4gICBlbGVtZW50OiBVXHJcblxyXG4gICBjb25zdHJ1Y3RvcihcclxuICAgICAgdGVtcGxhdGVJZDogc3RyaW5nLCBcclxuICAgICAgaG9zdEVsZW1lbnRJZDogc3RyaW5nLCBcclxuICAgICAgaW5zZXJ0QXRTdGFydDogYm9vbGVhbixcclxuICAgICAgbmV3RWxlbWVudElkPzogc3RyaW5nLFxyXG4gICApe1xyXG4gICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IDxIVE1MVGVtcGxhdGVFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlSWQpXHJcbiAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSA8VD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChob3N0RWxlbWVudElkKVxyXG4gICAgICBjb25zdCBpbXBvcnRlZE5vZGUgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQsIHRydWUpXHJcbiAgICAgIHRoaXMuZWxlbWVudCA9IDxVPmltcG9ydGVkTm9kZS5maXJzdEVsZW1lbnRDaGlsZFxyXG4gICAgICBpZihuZXdFbGVtZW50SWQpe1xyXG4gICAgICAgICB0aGlzLmVsZW1lbnQuaWQgPSBuZXdFbGVtZW50SWRcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmF0dGFjaChpbnNlcnRBdFN0YXJ0KVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGF0dGFjaChpbnNlcnRBdFN0YXJ0OiBib29sZWFuKXtcclxuICAgICAgdGhpcy5ob3N0RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoaW5zZXJ0QXRTdGFydCA/ICdhZnRlcmJlZ2luJyA6ICdiZWZvcmVlbmQnLCB0aGlzLmVsZW1lbnQpXHJcbiAgIH1cclxuXHJcbiAgIGFic3RyYWN0IGNvbmZpZ3VyZSgpOiB2b2lkXHJcbiAgIGFic3RyYWN0IHJlbmRlckNvbnRlbnQoKTogdm9pZFxyXG59IiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9iYXNlLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFZhbGlkYXRhYmxlLCB2YWxpZGF0ZSB9IGZyb20gJy4uL3V0aWwvdmFsaWRhdGlvbic7XHJcbmltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9hdXRvYmluZCc7XHJcbmltcG9ydCB7IHByb2plY3RTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3Byb2plY3Qtc3RhdGUnO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0SW5wdXQgZXh0ZW5kcyBDb21wb25lbnQ8SFRNTERpdkVsZW1lbnQsIEhUTUxGb3JtRWxlbWVudD4ge1xyXG4gICB0aXRsZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudFxyXG4gICBkZXNjcmlwdGlvbklucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudFxyXG4gICBwZW9wbGVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnRcclxuXHJcbiAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICBzdXBlcigncHJvamVjdC1pbnB1dCcsICdhcHAnLCB0cnVlLCAndXNlci1pbnB1dCcpXHJcbiAgICAgIHRoaXMudGl0bGVJbnB1dEVsZW1lbnQgPSA8SFRNTElucHV0RWxlbWVudD50aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlJylcclxuICAgICAgdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudCA9IDxIVE1MSW5wdXRFbGVtZW50PnRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKVxyXG4gICAgICB0aGlzLnBlb3BsZUlucHV0RWxlbWVudCA9IDxIVE1MSW5wdXRFbGVtZW50PnRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjcGVvcGxlJylcclxuICAgICAgdGhpcy5jb25maWd1cmUoKVxyXG4gICB9XHJcbiAgIHJlbmRlckNvbnRlbnQoKXt9XHJcblxyXG4gICBwcml2YXRlIGdhdGhlclVzZXJJbnB1dCgpOltzdHJpbmcsIHN0cmluZywgbnVtYmVyXSB8IHZvaWR7XHJcbiAgICAgIGNvbnN0IGVudGVyZWRUaXRsZSA9IHRoaXMudGl0bGVJbnB1dEVsZW1lbnQudmFsdWVcclxuICAgICAgY29uc3QgZW50ZXJlZERlc2NyaXB0aW9uID0gdGhpcy50aXRsZUlucHV0RWxlbWVudC52YWx1ZVxyXG4gICAgICBjb25zdCBlbnRlcmVkUGVvcGxlID0gdGhpcy50aXRsZUlucHV0RWxlbWVudC52YWx1ZVxyXG4gICAgICB0aGlzLmNsZWFySW5wdXRzKClcclxuICAgICAgY29uc3QgdGl0bGVJbnB1dDogVmFsaWRhdGFibGUgPXtcclxuICAgICAgICAgdmFsdWU6IGVudGVyZWRUaXRsZSxcclxuICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgIG1pbkxlbmd0aDogNVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uSW5wdXQ6IFZhbGlkYXRhYmxlID17XHJcbiAgICAgICAgIHZhbHVlOiBlbnRlcmVkVGl0bGUsXHJcbiAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICBtaW5MZW5ndGg6IDVcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwZW9wbGVJbnB1dDogVmFsaWRhdGFibGUgPXtcclxuICAgICAgICAgdmFsdWU6IGVudGVyZWRUaXRsZSxcclxuICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgIG1pbjogNSxcclxuICAgICAgICAgbWF4OiA1XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmKFxyXG4gICAgICAgICAhdmFsaWRhdGUodGl0bGVJbnB1dCkgfHxcclxuICAgICAgICAgIXZhbGlkYXRlKGRlc2NyaXB0aW9uSW5wdXQpIHx8XHJcbiAgICAgICAgICF2YWxpZGF0ZShwZW9wbGVJbnB1dCkgXHJcbiAgICAgICl7XHJcbiAgICAgICAgIGFsZXJ0KCdpbnZhbGlkIGlucHV0JylcclxuICAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgICByZXR1cm4gW2VudGVyZWRUaXRsZSwgZW50ZXJlZERlc2NyaXB0aW9uLCArZW50ZXJlZFBlb3BsZV1cclxuICAgICAgfVxyXG5cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBjbGVhcklucHV0cygpe1xyXG4gICAgICB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlID0gJydcclxuICAgICAgdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudC52YWx1ZSA9ICcnXHJcbiAgICAgIHRoaXMucGVvcGxlSW5wdXRFbGVtZW50LnZhbHVlID0gJydcclxuICAgfVxyXG5cclxuICAgQGF1dG9iaW5kXHJcbiAgIHByaXZhdGUgc3VibWl0SGFuZGxlcihldmVudDogRXZlbnQpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICBjb25zdCB1c2VySW5wdXQgPSB0aGlzLmdhdGhlclVzZXJJbnB1dCgpXHJcbiAgICAgIGlmKEFycmF5LmlzQXJyYXkodXNlcklucHV0KSl7XHJcbiAgICAgICAgIGNvbnN0IFt0aXRsZSwgZGVzY3JpcHRpb24sIHBlb3BsZV0gPSB1c2VySW5wdXRcclxuICAgICAgICAgcHJvamVjdFN0YXRlLmFkZFByb2plY3QodGl0bGUsIGRlc2NyaXB0aW9uLCBwZW9wbGUpXHJcbiAgICAgICAgIHRoaXMuY2xlYXJJbnB1dHMoKVxyXG4gICAgICB9XHJcbiAgIH1cclxuICAgY29uZmlndXJlKCkge1xyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRIYW5kbGVyLmJpbmQodGhpcykpXHJcbiAgIH1cclxufSIsImltcG9ydCB7IERyYWdnYWJsZSB9IGZyb20gJy4uL21vZGVscy9kcmFnLWRyb3AnO1xyXG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnO1xyXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL2Jhc2UtY29tcG9uZW50JztcclxuaW1wb3J0IHsgYXV0b2JpbmQgfSBmcm9tICcuLi9kZWNvcmF0b3JzL2F1dG9iaW5kJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0SXRlbSBleHRlbmRzIENvbXBvbmVudDxIVE1MVUxpc3RFbGVtZW50LCBIVE1MTElFbGVtZW50PiBpbXBsZW1lbnRzIERyYWdnYWJsZXtcclxuICAgcHJpdmF0ZSBwcm9qZWN0OiBQcm9qZWN0XHJcblxyXG4gICBnZXQgcGVyc29ucygpe1xyXG4gICAgICByZXR1cm4gdGhpcy5wcm9qZWN0LnBlb3BsZSA9PT0gMSA/ICcxIHBlcnNvbicgOiBgJHt0aGlzLnByb2plY3QucGVvcGxlfSBwZXJzb25zYFxyXG4gICB9XHJcblxyXG4gICBjb25zdHJ1Y3RvcihcclxuICAgICAgaG9zdElkOiBzdHJpbmcsXHJcbiAgICAgIHByb2plY3Q6IFByb2plY3RcclxuICAgKXtcclxuICAgICAgc3VwZXIoJ3NpbmdsZS1wcm9qZWN0JywgaG9zdElkLCBmYWxzZSwgcHJvamVjdC5pZClcclxuICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdFxyXG4gICAgICB0aGlzLmNvbmZpZ3VyZSgpXHJcbiAgICAgIHRoaXMucmVuZGVyQ29udGVudCgpXHJcbiAgIH1cclxuXHJcbiAgIEBhdXRvYmluZFxyXG4gICBkcmFnU3RhcnRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpe1xyXG4gICAgICBldmVudC5kYXRhVHJhbnNmZXIhLnNldERhdGEoJ3RleHQvcGxhaW4nLCB0aGlzLnByb2plY3QuaWQpXHJcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJ1xyXG4gICB9XHJcblxyXG4gICBAYXV0b2JpbmRcclxuICAgZHJhZ0VuZEhhbmRsZXIoXzogRHJhZ0V2ZW50KXtcclxuXHJcbiAgIH1cclxuXHJcbiAgIGNvbmZpZ3VyZSgpe1xyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnRIYW5kbGVyKVxyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuZHJhZ1N0YXJ0SGFuZGxlcilcclxuICAgfVxyXG4gICByZW5kZXJDb250ZW50KCl7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMicpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC50aXRsZVxyXG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDMnKSEudGV4dENvbnRlbnQgPSB0aGlzLnBlcnNvbnMgKydhc3NpZ25lZC4nXHJcbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdwJykhLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LmRlc2NyaXB0aW9uXHJcbiAgIH1cclxufSIsImltcG9ydCB7IERyYWdUYXJnZXQgfSBmcm9tICcuLi9tb2RlbHMvZHJhZy1kcm9wJztcclxuaW1wb3J0IHsgUHJvamVjdCwgUHJvamVjdFN0YXR1cyB9IGZyb20gJy4uL21vZGVscy9wcm9qZWN0JztcclxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9iYXNlLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9hdXRvYmluZCc7XHJcbmltcG9ydCB7IHByb2plY3RTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3Byb2plY3Qtc3RhdGUnO1xyXG5pbXBvcnQgeyBQcm9qZWN0SXRlbSB9IGZyb20gJy4vcHJvamVjdC1pdGVtJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0TGlzdCBleHRlbmRzIENvbXBvbmVudDxIVE1MRGl2RWxlbWVudCwgSFRNTEVsZW1lbnQ+IGltcGxlbWVudHMgRHJhZ1RhcmdldHtcclxuICAgYXNzaWduZWRQcm9qZWN0czogUHJvamVjdFtdXHJcblxyXG4gICBjb25zdHJ1Y3Rvcihwcml2YXRlIHR5cGU6ICdhY3RpdmUnIHwgJ2ZpbmlzaGVkJyl7XHJcbiAgICAgIHN1cGVyKCdwcm9qZWN0LWxpc3QnLCAnYXBwJywgZmFsc2UsIGAke3R5cGV9LXByb2plY3RzYClcclxuICAgICAgdGhpcy5hc3NpZ25lZFByb2plY3RzID0gW11cclxuICAgICAgdGhpcy5yZW5kZXJDb250ZW50KClcclxuICAgICAgdGhpcy5jb25maWd1cmUoKVxyXG4gICB9XHJcblxyXG4gICBAYXV0b2JpbmRcclxuICAgZHJhZ092ZXJIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpe1xyXG4gICAgICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyICYmIGV2ZW50LmRhdGFUcmFuc2Zlci50eXBlc1swXT09PSAndGV4dC9wbGFpbicpe1xyXG4gICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgIGNvbnN0IGxpc3RFbCA9IDxIVE1MVUxpc3RFbGVtZW50PnRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpXHJcbiAgICAgICAgIGxpc3RFbC5jbGFzc0xpc3QuYWRkKCdkcm9wcGFibGUnKVxyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIEBhdXRvYmluZFxyXG4gICBkcmFnTGVhdmVIYW5kbGVyKF86IERyYWdFdmVudCl7XHJcbiAgICAgIGNvbnN0IGxpc3RFbCA9IDxIVE1MVUxpc3RFbGVtZW50PnRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpXHJcbiAgICAgIGxpc3RFbC5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wcGFibGUnKVxyXG4gICB9XHJcblxyXG4gICBAYXV0b2JpbmRcclxuICAgZHJvcEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCl7XHJcbiAgICAgIGNvbnN0IHByb2plY3RJZCA9IGV2ZW50LmRhdGFUcmFuc2ZlciEuZ2V0RGF0YSgndGV4dC9wbGFpbicpXHJcbiAgICAgIHByb2plY3RTdGF0ZS5tb3ZlUHJvamVjdChwcm9qZWN0SWQsIHRoaXMudHlwZSA9PT0gJ2FjdGl2ZScgPyBQcm9qZWN0U3RhdHVzLkFjdGl2ZSA6IFByb2plY3RTdGF0dXMuRmluaXNoZWQpXHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgcmVuZGVyUHJvamVjdHMoKXtcclxuICAgICAgY29uc3QgbGlzdCA9IDxIVE1MVUxpc3RFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3RoaXMudHlwZX0tcHJvamVjdHMtbGlzdGApXHJcbiAgICAgIGxpc3QuaW5uZXJIVE1MID0gJydcclxuICAgICAgdGhpcy5hc3NpZ25lZFByb2plY3RzLmZvckVhY2goaXRlbT0+e1xyXG4gICAgICAgICBuZXcgUHJvamVjdEl0ZW0odGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkLCBpdGVtKVxyXG4gICAgICB9KVxyXG4gICB9XHJcblxyXG4gICBjb25maWd1cmUoKSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXJIYW5kbGVyKVxyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgdGhpcy5kcmFnTGVhdmVIYW5kbGVyKVxyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuZHJvcEhhbmRsZXIpXHJcblxyXG4gICAgICBwcm9qZWN0U3RhdGUuYWRkTGlzdGVuZXIoKHByb2plY3RzOiBQcm9qZWN0W10pPT57XHJcbiAgICAgICAgIGNvbnN0IHJlbGV2YW50UHJvamVjdHMgPSBwcm9qZWN0cy5maWx0ZXIocHJvamVjdD0+e1xyXG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgPT09ICdhY3RpdmUnKXtcclxuICAgICAgICAgICAgICAgcmV0dXJuIHByb2plY3Quc3RhdHVzID09PSBQcm9qZWN0U3RhdHVzLkFjdGl2ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9qZWN0LnN0YXR1cyA9PT0gUHJvamVjdFN0YXR1cy5GaW5pc2hlZFxyXG4gICAgICAgICB9KVxyXG4gICAgICAgICB0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSByZWxldmFudFByb2plY3RzXHJcbiAgICAgICAgIHRoaXMucmVuZGVyUHJvamVjdHMoKVxyXG4gICAgICB9KVxyXG4gICB9XHJcblxyXG4gICByZW5kZXJDb250ZW50KCl7XHJcbiAgICAgIGNvbnN0IGxpc3RJZCA9IGAke3RoaXMudHlwZX0tcHJvamVjdHMtbGlzdGBcclxuICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkID0gbGlzdElkIFxyXG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDInKSEudGV4dENvbnRlbnQgPSB0aGlzLnR5cGUudG9VcHBlckNhc2UoKSArICdQUk9KRUNUUydcclxuICAgfVxyXG59XHJcbiIsImV4cG9ydCBmdW5jdGlvbiBhdXRvYmluZChfOiBhbnksIF8yOiBzdHJpbmcsIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvcikge1xyXG4gICBjb25zdCBvcmdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZVxyXG4gICBjb25zdCBhZGpEZXNjcmlwdG9yOlByb3BlcnR5RGVzY3JpcHRvciA9IHtcclxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICBnZXQoKXtcclxuICAgICAgICAgY29uc3QgYm91bmRGbiA9IG9yZ2luYWxNZXRob2QuYmluZCh0aGlzKVxyXG4gICAgICAgICByZXR1cm4gYm91bmRGblxyXG4gICAgICB9XHJcbiAgIH1cclxuICAgcmV0dXJuIGFkakRlc2NyaXB0b3JcclxufSIsImV4cG9ydCBjbGFzcyBQcm9qZWN0e1xyXG4gICBjb25zdHJ1Y3RvcihcclxuICAgICAgcHVibGljIGlkOiBzdHJpbmcsXHJcbiAgICAgIHB1YmxpYyB0aXRsZTogc3RyaW5nLFxyXG4gICAgICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgICAgcHVibGljIHBlb3BsZTogbnVtYmVyLFxyXG4gICAgICBwdWJsaWMgc3RhdHVzOiBQcm9qZWN0U3RhdHVzXHJcbiAgICl7XHJcblxyXG4gICB9XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFByb2plY3RTdGF0dXN7XHJcbiAgIEFjdGl2ZSxcclxuICAgRmluaXNoZWRcclxufSIsImltcG9ydCB7IFByb2plY3QsIFByb2plY3RTdGF0dXMgfSBmcm9tICcuLi9tb2RlbHMvcHJvamVjdCc7XHJcblxyXG5jbGFzcyBTdGF0ZTxUPiB7XHJcbiAgIHByb3RlY3RlZCBsaXN0ZW5lcnM6IExpc3RlbmVyPFQ+W10gPSBbXVxyXG5cclxuICAgYWRkTGlzdGVuZXIobGlzdGVuZXJGdW5jdGlvbjogTGlzdGVuZXI8VD4pe1xyXG4gICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyRnVuY3Rpb24pXHJcbiAgIH1cclxufVxyXG5cclxudHlwZSBMaXN0ZW5lcjxUPiA9IChpdGVtczpUW10pID0+IHZvaWRcclxuXHJcbmNsYXNzIFByb2plY3RTdGF0ZSBleHRlbmRzIFN0YXRlPFByb2plY3Q+e1xyXG4gICBwcml2YXRlIHByb2plY3RzOiBQcm9qZWN0W10gPSBbXVxyXG4gICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogUHJvamVjdFN0YXRlXHJcbiAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHN1cGVyKClcclxuICAgfVxyXG5cclxuICAgc3RhdGljIGdldEluc3RhbmNlKCl7XHJcbiAgICAgIGlmKHRoaXMuaW5zdGFuY2Upe1xyXG4gICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgUHJvamVjdFN0YXRlKClcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VcclxuICAgfVxyXG5cclxuXHJcbiAgIGFkZFByb2plY3QodGl0bGU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgbnVtYmVyT2ZQZW9wbGU6IG51bWJlcil7XHJcbiAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdChcclxuICAgICAgICAgTWF0aC5yYW5kb20oKS50b1N0cmluZygpLFxyXG4gICAgICAgICB0aXRsZSxcclxuICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgIG51bWJlck9mUGVvcGxlLFxyXG4gICAgICAgICBQcm9qZWN0U3RhdHVzLkFjdGl2ZVxyXG4gICAgICApXHJcbiAgICAgIHRoaXMucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KVxyXG4gICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGZuPT57XHJcbiAgICAgICAgIGZuKFsuLi50aGlzLnByb2plY3RzXSlcclxuICAgICAgfSlcclxuICAgfVxyXG5cclxuICAgbW92ZVByb2plY3QocHJvamVjdElkOiBzdHJpbmcsIG5ld1N0YXR1czogUHJvamVjdFN0YXR1cyl7XHJcbiAgICAgIGNvbnN0IHByb2plY3QgPSB0aGlzLnByb2plY3RzLmZpbmQocHJqPT5wcmouaWQgPT09IHByb2plY3RJZClcclxuICAgICAgaWYocHJvamVjdCAmJiBwcm9qZWN0LnN0YXR1cyAhPT0gbmV3U3RhdHVzKXtcclxuICAgICAgICAgcHJvamVjdC5zdGF0dXMgPSBuZXdTdGF0dXNcclxuICAgICAgICAgdGhpcy51cGRhdGVMaXN0ZW5lcnMoKVxyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgdXBkYXRlTGlzdGVuZXJzKCl7XHJcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXJGbiBvZiB0aGlzLmxpc3RlbmVycyl7XHJcbiAgICAgICAgIGxpc3RlbmVyRm4odGhpcy5wcm9qZWN0cy5zbGljZSgpKVxyXG4gICAgICB9XHJcbiAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHByb2plY3RTdGF0ZSA9IFByb2plY3RTdGF0ZS5nZXRJbnN0YW5jZSgpIiwiZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKGlucHV0OiBWYWxpZGF0YWJsZSl7XHJcbiAgIGxldCBpc1ZhbGlkID0gdHJ1ZVxyXG4gICBpZihpbnB1dC5yZXF1aXJlZCl7XHJcbiAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIGlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCAhPT0gMFxyXG4gICB9XHJcbiAgIGlmKGlucHV0Lm1pbkxlbmd0aCAhPSBudWxsICYmIHR5cGVvZiBpbnB1dC52YWx1ZSA9PT0gJ3N0cmluZycpe1xyXG4gICAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiBpbnB1dC52YWx1ZS5sZW5ndGggPiBpbnB1dC5taW5MZW5ndGhcclxuICAgfVxyXG4gICBpZihpbnB1dC5tYXhMZW5ndGggIT0gbnVsbCAmJiB0eXBlb2YgaW5wdXQudmFsdWUgPT09ICdzdHJpbmcnKXtcclxuICAgICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgaW5wdXQudmFsdWUubGVuZ3RoIDwgaW5wdXQubWF4TGVuZ3RoXHJcbiAgIH1cclxuICAgaWYoaW5wdXQubWluICE9IG51bGwgJiYgdHlwZW9mIGlucHV0LnZhbHVlID09PSAnbnVtYmVyJyl7XHJcbiAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIGlucHV0LnZhbHVlID4gaW5wdXQubWluXHJcbiAgIH1cclxuICAgaWYoaW5wdXQubWF4ICE9IG51bGwgJiYgdHlwZW9mIGlucHV0LnZhbHVlID09PSAnbnVtYmVyJyl7XHJcbiAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIGlucHV0LnZhbHVlID4gaW5wdXQubWF4XHJcbiAgIH1cclxuICAgcmV0dXJuIGlzVmFsaWRcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0YWJsZXtcclxuICAgdmFsdWU6IHN0cmluZyB8IG51bWJlclxyXG4gICByZXF1aXJlZD86IGJvb2xlYW5cclxuICAgbWluTGVuZ3RoPzogbnVtYmVyXHJcbiAgIG1heExlbmd0aD86IG51bWJlclxyXG4gICBtaW4/OiBudW1iZXJcclxuICAgbWF4PzogbnVtYmVyXHJcbn1cclxuXHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgeyBQcm9qZWN0SW5wdXQgfSBmcm9tICcuL2NvbXBvbmVudHMvcHJvamVjdC1pbnB1dCc7XHJcbmltcG9ydCB7IFByb2plY3RMaXN0IH0gZnJvbSAnLi9jb21wb25lbnRzL3Byb2plY3QtbGlzdCc7XHJcblxyXG5cclxubmV3IFByb2plY3RJbnB1dCgpXHJcbm5ldyBQcm9qZWN0TGlzdCgnYWN0aXZlJylcclxubmV3IFByb2plY3RMaXN0KCdmaW5pc2hlZCcpIl0sInNvdXJjZVJvb3QiOiIifQ==